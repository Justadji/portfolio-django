<div class="forum-card {% if post.is_hidden %}is-hidden{% endif %}{% if post.parent %} is-reply{% endif %}">
    <p class="forum-meta">
        <span class="icon">&#128100;</span><strong>{{ post.auteur_nom }}</strong> - {{ post.created_at|date:"d/m/Y H:i" }}
    </p>
    {% if post.parent %}
        <p class="reply-to">R&eacute;ponse &agrave; <strong>@{{ post.parent.auteur_nom }}</strong></p>
    {% endif %}
    {% if post.is_hidden %}
        <p><em>Message masqu&eacute; par la mod&eacute;ration.</em></p>
    {% else %}
        <p>{{ post.message|linebreaks }}</p>
    {% endif %}
    <div class="forum-actions">
        <form method="post" action="{% url 'forum_post_like' post.id %}">
            {% csrf_token %}
            <button type="submit" class="link-button">
                <span class="icon">&#10084;</span>{{ post.likes_count }}
            </button>
        </form>
        <button class="link-button" type="button" data-reply-post="{{ post.id }}" data-reply-author="{{ post.auteur_nom }}">
            <span class="icon">&#128172;</span>R&eacute;pondre
        </button>
    </div>

    {% if post.replies.all %}
    <div class="forum-replies">
        {% for child in post.replies.all %}
            {% include "forum_post.html" with post=child %}
        {% endfor %}
    </div>
    {% endif %}
</div>
